<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button
        [routerLink]="['/situation-detail', 1]"
        routerDirection="back"
      >
        <ion-icon slot="icon-only" name="chevron-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>{{ evaluation.situationTitle }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div class="page-title">Contexte</div>

  <p class="page-text">{{ evaluation.context }}</p>

  <div class="page-title">Évaluations</div>

  <div class="ion-margin-vertical">
    <div
      class="list-item"
      *ngFor="let criterion of evaluation.criteria"
      (click)="openModalCriterionDetail(criterion)"
    >
      <div class="list-item-content">
        <div class="list-item-title -regular">{{ criterion.title }}</div>
        <div class="list-item-infos">
          <div class="list-item-info">
            <svg-icon
              src="assets/images/svg-icons/icon-smile.svg"
              [svgStyle]="{ 'width.px':21 }"
            ></svg-icon>
            <span>{{ criterion.evaluated}}</span>
          </div>
          <div class="list-item-info">
            <svg-icon
              src="assets/images/svg-icons/icon-comment.svg"
              [svgStyle]="{ 'width.px':23 }"
            ></svg-icon>
            <span>{{ criterion.comments }}</span>
          </div>
        </div>
      </div>
      <div class="list-item-icon">
        <svg-icon
          src="assets/images/svg-icons/emojis/ranking-active-{{ criterion.grade ? criterion.grade : 'null' }}.svg"
          [svgStyle]="{ 'width.px':36 }"
        ></svg-icon>
      </div>
    </div>
  </div>

  <div class="page-title">Commentaire</div>

  <p class="page-text quote">
    <svg-icon
      src="assets/images/svg-icons/icon-quote.svg"
      [svgStyle]="{ 'width.px':16 }"
    ></svg-icon>
    {{ evaluation.comment }}
  </p>

  <div class="page-subtitle">Répondre</div>

  <form
    [formGroup]="answerEvaluationForm"
    (ngSubmit)="answerEvaluation()"
    [class.-submitted]="formSubmitted"
    class="form"
  >
    <ion-item class="form-input" lines="none">
      <ion-textarea formControlName="answer"></ion-textarea>
    </ion-item>

    <div *ngIf="errorMsg" class="form-error">{{ errorMsg }}</div>

    <button class="btn btn-primary nnki-mb4" (click)="answerEvaluation()">
      Envoyer
    </button>
  </form>
</ion-content>
